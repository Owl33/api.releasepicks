# ë°±ì—”ë“œ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸

## update-steam-game-details.ts (ìµœì‹  - ê¶Œì¥) â­

Steamê³¼ RAWG IDê°€ ëª¨ë‘ ìˆëŠ” ë©€í‹°í”Œë«í¼ ê²Œì„ì˜ game_detailsë¥¼ Steam ë°ì´í„°ë¡œ ë®ì–´ì“°ëŠ” ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤.

### ì‚¬ìš© ëª©ì 

- `steam_id`ì™€ `rawg_id`ê°€ **ëª¨ë‘ ì¡´ì¬**í•˜ëŠ” ê²Œì„ì˜ `game_details` í…Œì´ë¸”ì„ Steam ë°ì´í„°ë¡œ **ì „ì²´ ë®ì–´ì“°ê¸°**
- ë©€í‹°í”Œë«í¼ ê²Œì„ì˜ ê²½ìš° Steam ë°ì´í„°ê°€ ë” ì •í™•í•˜ê³  ìƒì„¸í•¨
- RAWG ë°ì´í„°ê°€ ë¨¼ì € ì €ì¥ëœ ê²½ìš° Steam ë°ì´í„°ë¡œ ë³´ì •

### ì‹¤í–‰ ë°©ë²•

#### ë°©ë²• 1: npm scripts ì‚¬ìš© (ê¶Œì¥)

```bash
# 1. Dry Run í…ŒìŠ¤íŠ¸ (10ê°œ ê²Œì„, ì‹¤ì œ ì—…ë°ì´íŠ¸ ì•ˆ í•¨)
npm run update:steam-details:test

# 2. Dry Run (ì „ì²´ ê²Œì„, ì‹¤ì œ ì—…ë°ì´íŠ¸ ì•ˆ í•¨)
npm run update:steam-details:dry

# 3. ì‹¤ì œ ì—…ë°ì´íŠ¸
npm run update:steam-details
```

#### ë°©ë²• 2: ì§ì ‘ ì‹¤í–‰ (ì˜µì…˜ ì¡°ì ˆ í•„ìš” ì‹œ)

```bash
# 1. Dry Run (í…ŒìŠ¤íŠ¸ ì‹¤í–‰, ì‹¤ì œ ì—…ë°ì´íŠ¸ ì•ˆ í•¨)
npx ts-node scripts/update-steam-game-details.ts --dry-run

# 2. ì†Œìˆ˜ì˜ ê²Œì„ë§Œ í…ŒìŠ¤íŠ¸ (ì˜ˆ: 10ê°œ)
npx ts-node scripts/update-steam-game-details.ts --dry-run --limit 10

# 3. ì‹¤ì œ ì—…ë°ì´íŠ¸ (ì†Œìˆ˜ í…ŒìŠ¤íŠ¸ í›„ ì‹¤í–‰ ê¶Œì¥)
npx ts-node scripts/update-steam-game-details.ts --limit 50

# 4. ì „ì²´ ì‹¤í–‰
npx ts-node scripts/update-steam-game-details.ts
```

### ì—…ë°ì´íŠ¸ ëŒ€ìƒ

**ì¡°ê±´**: `games` í…Œì´ë¸”ì—ì„œ `steam_id IS NOT NULL AND rawg_id IS NOT NULL`

**ì—…ë°ì´íŠ¸ í•„ë“œ**:
- `header_image` - í—¤ë” ì´ë¯¸ì§€
- `screenshots` - ìŠ¤í¬ë¦°ìƒ· 5ì¥
- `video_url` - íŠ¸ë ˆì¼ëŸ¬ ì˜ìƒ
- `description` - ìƒì„¸ ì„¤ëª…
- `website` - ê³µì‹ ì›¹ì‚¬ì´íŠ¸
- `genres` - ì¥ë¥´
- `tags` - ì¹´í…Œê³ ë¦¬
- `support_languages` - ì§€ì› ì–¸ì–´
- `metacritic_score` - ë©”íƒ€í¬ë¦¬í‹± ì ìˆ˜

**ìœ ì§€ë˜ëŠ” í•„ë“œ** (Steamì— ì—†ëŠ” ë°ì´í„°):
- `opencritic_score` - ì˜¤í”ˆí¬ë¦¬í‹± ì ìˆ˜ (RAWG ì „ìš©)
- `rawg_added` - RAWG added ìˆ˜ (RAWG ì „ìš©)

### ì£¼ì˜ì‚¬í•­

1. **Steam API Rate Limit**
   - Steam APIëŠ” **310ì´ˆë‹¹ 200ê°œ í˜¸ì¶œ** ì œí•œì´ ìˆìŠµë‹ˆë‹¤
   - ìë™ìœ¼ë¡œ Rate Limitì„ ê´€ë¦¬í•˜ê³  ëŒ€ê¸°í•˜ë¯€ë¡œ ì¤‘ë‹¨í•˜ì§€ ë§ˆì„¸ìš”
   - 200ê°œ í˜¸ì¶œ í›„ ìë™ìœ¼ë¡œ ë‚¨ì€ ì‹œê°„ë§Œí¼ ëŒ€ê¸°í•©ë‹ˆë‹¤

2. **ì²˜ìŒ ì‹¤í–‰ ì‹œ ê¶Œì¥ ì ˆì°¨**
   ```bash
   # 1ë‹¨ê³„: Dry Runìœ¼ë¡œ í™•ì¸ (10ê°œ ê²Œì„ í…ŒìŠ¤íŠ¸)
   npm run update:steam-details:test

   # 2ë‹¨ê³„: ì†Œìˆ˜ë§Œ ì‹¤ì œ ì—…ë°ì´íŠ¸í•˜ì—¬ í…ŒìŠ¤íŠ¸ (50ê°œ)
   npx ts-node scripts/update-steam-game-details.ts --limit 50

   # 3ë‹¨ê³„: DBì—ì„œ ì—…ë°ì´íŠ¸ ê²°ê³¼ í™•ì¸
   # Supabase Dashboardì—ì„œ í™•ì¸

   # 4ë‹¨ê³„: ë¬¸ì œ ì—†ìœ¼ë©´ ì „ì²´ ì‹¤í–‰
   npm run update:steam-details
   ```

### ì‹¤í–‰ ê²°ê³¼ ì˜ˆì‹œ

```
ğŸš€ Steam ê²Œì„ ìƒì„¸ì •ë³´ ì¼ê´„ ì—…ë°ì´íŠ¸ ì‹œì‘...
âš ï¸ ì£¼ì˜: game_details í…Œì´ë¸”ì„ Steam ë°ì´í„°ë¡œ ë¬´ì¡°ê±´ ë®ì–´ì”ë‹ˆë‹¤!
ğŸ“ ì—…ë°ì´íŠ¸ ëŒ€ìƒ: steam_idì™€ rawg_idê°€ ëª¨ë‘ ì¡´ì¬í•˜ëŠ” ê²Œì„
âœ… ì´ 245ê°œì˜ ë©€í‹°í”Œë«í¼ ê²Œì„ ë°œê²¬ (Steam + RAWG)

âš ï¸ ì£¼ì˜: ì´ ì‘ì—…ì€ Steam API Rate Limitìœ¼ë¡œ ì¸í•´ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦½ë‹ˆë‹¤.
   - ì´ 245ê°œ ê²Œì„ ì²˜ë¦¬ ì˜ˆì •
   - Rate Limit: 310ì´ˆë‹¹ 200ê°œ í˜¸ì¶œ
   - ì˜ˆìƒ ìœˆë„ìš°: 2ê°œ
   - ì˜ˆìƒ ì†Œìš” ì‹œê°„: ì•½ 11ë¶„

ğŸ“Š ì§„í–‰ë¥ : 100/245 (41%) | ì„±ê³µ: 98 | ìŠ¤í‚µ: 2 | ì‹¤íŒ¨: 0 | Rate Limit: 100/200 (155ì´ˆ ê²½ê³¼)
â¸ï¸ Rate Limit ë„ë‹¬ (200ê°œ í˜¸ì¶œ) - 155ì´ˆ ëŒ€ê¸° ì¤‘...
ğŸ”„ Rate Limit ìœˆë„ìš° ë¦¬ì…‹ - ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤.

============================================================
âœ… Steam ê²Œì„ ìƒì„¸ì •ë³´ ì¼ê´„ ì—…ë°ì´íŠ¸ ì™„ë£Œ!
============================================================
ğŸ“Š ì´ ì²˜ë¦¬: 245ê°œ
   âœ… ì—…ë°ì´íŠ¸ ì„±ê³µ: 240ê°œ
   â­ï¸ ìŠ¤í‚µ (ë°ì´í„° ì—†ìŒ): 3ê°œ
   âŒ ì‹¤íŒ¨: 2ê°œ

ğŸ“‹ ì—…ë°ì´íŠ¸ í•„ë“œ:
   - header_image (í—¤ë” ì´ë¯¸ì§€)
   - screenshots (ìŠ¤í¬ë¦°ìƒ· 5ì¥)
   - video_url (íŠ¸ë ˆì¼ëŸ¬ ì˜ìƒ)
   - description (ìƒì„¸ ì„¤ëª…)
   - website (ê³µì‹ ì›¹ì‚¬ì´íŠ¸)
   - genres (ì¥ë¥´)
   - tags (ì¹´í…Œê³ ë¦¬)
   - support_languages (ì§€ì› ì–¸ì–´)
   - metacritic_score (ë©”íƒ€í¬ë¦¬í‹± ì ìˆ˜)
```

---

## update-pc-game-details.ts (êµ¬ë²„ì „ - Deprecated)

PC ê²Œì„ì˜ description(ê²Œì„ ì„¤ëª…)ì„ Steam APIë¡œë¶€í„° ê°€ì ¸ì™€ ì—…ë°ì´íŠ¸í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤.

### ì‚¬ìš© ëª©ì 

- platform_typeì´ 'pc'ì¸ **ëª¨ë“  ê²Œì„**ì˜ descriptionì„ ì¼ê´„ ì—…ë°ì´íŠ¸
- Steamì˜ `short_description` ë°ì´í„°ë¡œ **ë¬´ì¡°ê±´ ë®ì–´ì“°ê¸°**
- ê¸°ì¡´ ì˜ëª»ëœ description ë°ì´í„° êµì²´
- ì•½ 2,500ê°œ PC ê²Œì„ì˜ description ì¼ê´„ ì¬ìˆ˜ì§‘

### ì‹¤í–‰ ë°©ë²•

#### ë°©ë²• 1: npm scripts ì‚¬ìš© (ê¶Œì¥)

```bash
# 1. Dry Run í…ŒìŠ¤íŠ¸ (10ê°œ ê²Œì„, ì‹¤ì œ ì—…ë°ì´íŠ¸ ì•ˆ í•¨)
npm run update:pc-details:test

# 2. Dry Run (ì „ì²´ ê²Œì„, ì‹¤ì œ ì—…ë°ì´íŠ¸ ì•ˆ í•¨)
npm run update:pc-details:dry

# 3. ì‹¤ì œ ì—…ë°ì´íŠ¸
npm run update:pc-details
```

#### ë°©ë²• 2: ì§ì ‘ ì‹¤í–‰ (ì˜µì…˜ ì¡°ì ˆ í•„ìš” ì‹œ)

```bash
# 1. Dry Run (í…ŒìŠ¤íŠ¸ ì‹¤í–‰, ì‹¤ì œ ì—…ë°ì´íŠ¸ ì•ˆ í•¨)
npx ts-node scripts/update-pc-game-details.ts --dry-run

# 2. ì†Œìˆ˜ì˜ ê²Œì„ë§Œ í…ŒìŠ¤íŠ¸ (ì˜ˆ: 10ê°œ)
npx ts-node scripts/update-pc-game-details.ts --dry-run --limit 10

# 3. ì‹¤ì œ ì—…ë°ì´íŠ¸ (ì†Œìˆ˜ í…ŒìŠ¤íŠ¸ í›„ ì‹¤í–‰ ê¶Œì¥)
# ì²˜ìŒì—ëŠ” ì†Œìˆ˜ë§Œ ì—…ë°ì´íŠ¸
npx ts-node scripts/update-pc-game-details.ts --limit 50

# ë¬¸ì œ ì—†ìœ¼ë©´ ì „ì²´ ì‹¤í–‰
npx ts-node scripts/update-pc-game-details.ts
```

### ì£¼ì˜ì‚¬í•­

1. **Steam API Rate Limit**
   - Steam APIëŠ” **310ì´ˆë‹¹ 200ê°œ í˜¸ì¶œ** ì œí•œì´ ìˆìŠµë‹ˆë‹¤
   - 2,500ê°œ ê²Œì„ ì²˜ë¦¬ ì‹œ **ì•½ 65ë¶„** ì†Œìš” (13ê°œ ìœˆë„ìš°)
   - ìë™ìœ¼ë¡œ Rate Limitì„ ê´€ë¦¬í•˜ê³  ëŒ€ê¸°í•˜ë¯€ë¡œ ì¤‘ë‹¨í•˜ì§€ ë§ˆì„¸ìš”
   - 200ê°œ í˜¸ì¶œ í›„ ìë™ìœ¼ë¡œ ë‚¨ì€ ì‹œê°„ë§Œí¼ ëŒ€ê¸°í•©ë‹ˆë‹¤

2. **ì²˜ìŒ ì‹¤í–‰ ì‹œ ê¶Œì¥ ì ˆì°¨**
   ```bash
   # 1ë‹¨ê³„: Dry Runìœ¼ë¡œ í™•ì¸ (10ê°œ ê²Œì„ í…ŒìŠ¤íŠ¸)
   npm run update:pc-details:test

   # 2ë‹¨ê³„: ì†Œìˆ˜ë§Œ ì‹¤ì œ ì—…ë°ì´íŠ¸í•˜ì—¬ í…ŒìŠ¤íŠ¸ (50ê°œ)
   npx ts-node scripts/update-pc-game-details.ts --limit 50

   # 3ë‹¨ê³„: DBì—ì„œ ì—…ë°ì´íŠ¸ ê²°ê³¼ í™•ì¸
   # SQL: SELECT * FROM game_details WHERE platform_type = 'pc' ORDER BY id DESC LIMIT 50;

   # 4ë‹¨ê³„: ë¬¸ì œ ì—†ìœ¼ë©´ ì „ì²´ ì‹¤í–‰
   npm run update:pc-details
   ```

3. **ì—…ë°ì´íŠ¸ ë¡œì§**
   - âš ï¸ **ê¸°ì¡´ description ë¬´ì¡°ê±´ ë®ì–´ì“°ê¸°** (ì˜ëª»ëœ ë°ì´í„° êµì²´)
   - âœ… **Steamì— descriptionì´ ì—†ìœ¼ë©´ë§Œ**: ìŠ¤í‚µ (ë¹ˆ ê°’ ë°©ì§€)
   - ì‚¬ìš© í•„ë“œ: `short_description` (Steam AppDetails API)

4. **ë‹¤ë¥¸ í•„ë“œëŠ” ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠìŒ**
   - screenshots, video_url, website, genres ë“±ì€ **ê±´ë“œë¦¬ì§€ ì•ŠìŒ**
   - **ì˜¤ì§ descriptionë§Œ** ì—…ë°ì´íŠ¸

### ì‹¤í–‰ ê²°ê³¼ ì˜ˆì‹œ

```
ğŸš€ PC ê²Œì„ Description ì—…ë°ì´íŠ¸ ì‹œì‘...
âš ï¸ ì£¼ì˜: ê¸°ì¡´ descriptionì„ ë¬´ì¡°ê±´ ë®ì–´ì”ë‹ˆë‹¤!
ğŸ“ ì—…ë°ì´íŠ¸ ëŒ€ìƒ: platform_type = "pc"ì¸ ëª¨ë“  ê²Œì„
ğŸ“‹ ì—…ë°ì´íŠ¸ ëŒ€ìƒ ê²Œì„ ì¡°íšŒ ì¤‘...
âœ… ì´ 2534ê°œì˜ PC ê²Œì„ ë°œê²¬

âš ï¸ ì£¼ì˜: ì´ ì‘ì—…ì€ Steam API Rate Limitìœ¼ë¡œ ì¸í•´ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦½ë‹ˆë‹¤.
   - ì´ 2534ê°œ ê²Œì„ ì²˜ë¦¬ ì˜ˆì •
   - Rate Limit: 310ì´ˆë‹¹ 200ê°œ í˜¸ì¶œ
   - ì˜ˆìƒ ìœˆë„ìš°: 13ê°œ
   - ì˜ˆìƒ ì†Œìš” ì‹œê°„: ì•½ 67ë¶„

ê³„ì†í•˜ë ¤ë©´ 5ì´ˆ ê¸°ë‹¤ë¦½ë‹ˆë‹¤...

ğŸ“Š ì§„í–‰ë¥ : 10/2534 (0%) | ì„±ê³µ: 8 | ìŠ¤í‚µ: 2 | ì‹¤íŒ¨: 0 | Rate Limit: 10/200 (15ì´ˆ ê²½ê³¼)
ğŸ“Š ì§„í–‰ë¥ : 200/2534 (8%) | ì„±ê³µ: 195 | ìŠ¤í‚µ: 5 | ì‹¤íŒ¨: 0 | Rate Limit: 200/200 (305ì´ˆ ê²½ê³¼)
â¸ï¸ Rate Limit ë„ë‹¬ (200ê°œ í˜¸ì¶œ) - 5ì´ˆ ëŒ€ê¸° ì¤‘...
ğŸ”„ Rate Limit ìœˆë„ìš° ë¦¬ì…‹ - ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤.
ğŸ“Š ì§„í–‰ë¥ : 210/2534 (8%) | ì„±ê³µ: 205 | ìŠ¤í‚µ: 5 | ì‹¤íŒ¨: 0 | Rate Limit: 10/200 (12ì´ˆ ê²½ê³¼)
...

============================================================
âœ… PC ê²Œì„ Description ì—…ë°ì´íŠ¸ ì™„ë£Œ!
============================================================
ğŸ“Š ì´ ì²˜ë¦¬: 2534ê°œ
   âœ… ì—…ë°ì´íŠ¸ ì„±ê³µ: 2480ê°œ
   â­ï¸ ìŠ¤í‚µ (ë°ì´í„° ì—†ìŒ): 50ê°œ
   âŒ ì‹¤íŒ¨: 4ê°œ
```

### ì‹¤íŒ¨ ì²˜ë¦¬

ì‹¤íŒ¨í•œ ê²Œì„ì€ ë¡œê·¸ì— ìƒì„¸íˆ ê¸°ë¡ë˜ë©°, ìŠ¤í¬ë¦½íŠ¸ëŠ” ê³„ì† ì§„í–‰ë©ë‹ˆë‹¤.
ì‹¤íŒ¨í•œ ê²Œì„ì€ ë‚˜ì¤‘ì— ê°œë³„ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë¡¤ë°± ë°©ë²•

ì—…ë°ì´íŠ¸ ì „ ë°±ì—…ì´ í•„ìš”í•œ ê²½ìš°:

```sql
-- ë°±ì—… í…Œì´ë¸” ìƒì„±
CREATE TABLE game_details_backup AS
SELECT * FROM game_details WHERE platform_type = 'pc';

-- í•„ìš” ì‹œ ë¡¤ë°±
UPDATE game_details gd
SET
  screenshots = gdb.screenshots,
  video_url = gdb.video_url,
  description = gdb.description,
  -- ê¸°íƒ€ í•„ë“œë“¤...
FROM game_details_backup gdb
WHERE gd.id = gdb.id;
```

### ë¬¸ì œ í•´ê²°

1. **"ìš”ì²­í•œ ê²Œì„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" ì—ëŸ¬**
   - ì •ìƒì ì¸ ê²½ìš°ì…ë‹ˆë‹¤ (Steamì—ì„œ ì‚­ì œëœ ê²Œì„ ë“±)
   - ìŠ¤í‚µë˜ë©° ë‹¤ìŒ ê²Œì„ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤

2. **Rate Limit 429 ì—ëŸ¬**
   - ìë™ìœ¼ë¡œ ëŒ€ê¸° í›„ ì¬ì‹œë„í•©ë‹ˆë‹¤
   - ê³„ì† ë°œìƒí•˜ë©´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¤‘ë‹¨í•˜ê³  ë‚˜ì¤‘ì— ì¬ì‹¤í–‰í•˜ì„¸ìš”

3. **ë©”ëª¨ë¦¬ ë¶€ì¡±**
   - `--limit` ì˜µì…˜ìœ¼ë¡œ ë°°ì¹˜ í¬ê¸°ë¥¼ ì¤„ì´ì„¸ìš”
   - ì˜ˆ: `--limit 500`ì”© ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰
